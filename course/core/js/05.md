# 第5章 基本引用类型

## Date

:::note 笔记
ECMAScript 的 Date 类型参考了 Java 早期版本中的 java.util.Date。
Date 类型将日期保存为自协调世界时（UTC）时间 1970 年 1 月 1 日午夜（零时）至今所经过的毫秒数。
使用这种存储格式，Date 类型可以精确表示 1970 年 1 月 1 日之前及之后 285 616 年的日期。
直接把表示日期的字符串传给 Date 构造函数，那么 Date 会在后台调用 Date.parse()。
ECMAScript为此提供了两个辅助方法：Date.parse()和 Date.UTC()。

:::

:::code Date.parse()和Date.UTC()

Date.parse()方法接收一个表示日期的字符串参数，尝试将这个字符串转换为表示该日期的毫秒数。
所有实现都必须支持下列日期格式：

- “月/日/年”，如"5/23/2019"；
- “月名 日, 年”，如"May 23, 2019"；
- “周几 月名 日 年 时:分:秒 时区”，如"Tue May 23 2019 00:00:00 GMT-0700"；
- ISO 8601 扩展格式“YYYY-MM-DDTHH:mm:ss.sssZ”，如 2019-05-23T00:00:00。
- 传给 Date.parse()的字符串并不表示日期，则该方法会返回 NaN。

Date.UTC()方法也返回日期的毫秒表示，但使用的是跟 Date.parse()不同的信息来生成这个值。
传给 Date.UTC()的参数是年、零起点月数（1 月是 0，2 月是 1，以此类推）、日（1~31）、时（0~23）、分、秒和毫秒。这些参数中，只有前两个（年和月）是必需的。如果不提供日，那么默认为 1 日。其他参数的默认值都是 0。

```js

    let date1 = new Date("2000-01-01");
    let transDate1 = new Date(Date.parse("2000-01-01"));
    let date11 = new Date(2000, 0);//转成本地时区,其他是转成格林0时区的， 北京时区需要加上8小时
    let transDate11 = new Date(Date.UTC(2000, 0));
    console.log(date1);       //Sat Jan 01 2000 08:00:00 GMT+0800 (中国标准时间)
    console.log(transDate1);  //Sat Jan 01 2000 08:00:00 GMT+0800 (中国标准时间)
    console.log(date11);      //Sat Jan 01 2000 00:00:00 GMT+0800 (中国标准时间)
    console.log(transDate11); //Sat Jan 01 2000 08:00:00 GMT+0800 (中国标准时间)
    let date2 = new Date("2005-05-05 17:55:55");
    let transDate2 = new Date(Date.parse("2005-05-05 17:55:55"));
    let date22 = new Date(2005, 4, 5, 17, 55, 55);
    let transDate22 = new Date(Date.UTC(2005, 4, 5, 17, 55, 55));//转成格林时区，所以本地需要加上8小时
    console.log(date2);       //Thu May 05 2005 17:55:55 GMT+0800 (中国标准时间)
    console.log(transDate2);  //Thu May 05 2005 17:55:55 GMT+0800 (中国标准时间)
    console.log(date22);      //Thu May 05 2005 17:55:55 GMT+0800 (中国标准时间)
    console.log(transDate22); //Fri May 06 2005 01:55:55 GMT+0800 (中国标准时间)
    console.log(Date.parse("2000-1w3-01"));//NaN
    console.log(Date.UTC(2000, "aa"));//NaN
    console.log(new Date(Date.parse("2000-1w3-01")));//Invalid Date
    console.log(new Date(Date.UTC(2000, "aa")));//Invalid Date
   
```

:::

:::code 继承的方法

与其他类型一样，Date 类型重写了 toLocaleString()、toString()和 valueOf()方法。
Date 类型的 toLocaleString()方法返回与浏览器运行的本地环境一致的日期和时间。
toString()方法通常返回带时区信息的日期和时间，而时间也是以 24 小时制（0~23）表示的。
Date 类型的 valueOf()方法根本就不返回字符串，这个方法被重写后返回的是日期的毫秒表示。

```js
    let date = new Date("2005-05-05 17:55:55");
    console.log(date.toLocaleString());//2005/5/5 下午5:55:55
    console.log(date.toString());//Thu May 05 2005 17:55:55 GMT+0800 (中国标准时间)
    console.log(date.valueOf());//1115286955000
```

:::

:::code 日期格式化方法

Date 类型有几个专门用于格式化日期的方法，它们都会返回字符串：

- toDateString()显示日期中的周几、月、日、年（格式特定于实现）；
- toTimeString()显示日期中的时、分、秒和时区（格式特定于实现）；
- toLocaleDateString()显示日期中的周几、月、日、年（格式特定于实现和地区）；
- toLocaleTimeString()显示日期中的时、分、秒（格式特定于实现和地区）；
- toUTCString()显示完整的 UTC 日期（格式特定于实现）。

```js
    let date = new Date("2005-05-05 17:55:55");
    console.log(date.toDateString());//Thu May 05 2005
    console.log(date.toTimeString());//17:55:55 GMT+0800 (中国标准时间)
    console.log(date.toLocaleDateString());//2005/5/5
    console.log(date.toLocaleTimeString());//下午5:55:55
    console.log(date.toUTCString());//Thu, 05 May 2005 09:55:55 GMT
```

:::

:::code 日期格式化方法

| 方 法                            | 说 明                                                    |
| -------------------------------- | -------------------------------------------------------- |
| getTime()                        | 返回日期的毫秒表示；与 valueOf()相同                     |
| setTime(milliseconds)            | 设置日期的毫秒表示，从而修改整个日期                     |
| getFullYear()                    | 返回 4 位数年（即 2019 而不是 19）                       |
| getUTCFullYear()                 | 返回 UTC 日期的 4 位数年                                 |
| setFullYear(year)                | 设置日期的年（year 必须是 4 位数）                       |
| setUTCFullYear(year)             | 设置 UTC 日期的年（year 必须是 4 位数）                  |
| getMonth()                       | 返回日期的月（0 表示 1 月，11 表示 12 月）               |
| getUTCMonth()                    | 返回 UTC 日期的月（0 表示 1 月，11 表示 12 月）          |
| setMonth(month)                  | 设置日期的月（month 为大于 0 的数值，大于 11 加年）      |
| setUTCMonth(month)               | 设置 UTC 日期的月（month 为大于 0 的数值，大于 11 加年） |
| getDate()                        | 返回日期中的日（1~31）                                   |
| getUTCDate()                     | 返回 UTC 日期中的日（1~31）                              |
| setDate(date)                    | 设置日期中的日（如果 date 大于该月天数，则加月）         |
| setUTCDate(date)                 | 设置 UTC 日期中的日（如果 date 大于该月天数，则加月）    |
| getDay()                         | 返回日期中表示周几的数值（0 表示周日，6 表示周六）       |
| getUTCDay()                      | 返回 UTC 日期中表示周几的数值（0 表示周日，6 表示周六）  |
| getHours()                       | 返回日期中的时（0~23）                                   |
| getUTCHours()                    | 返回 UTC 日期中的时（0~23）                              |
| setHours(hours)                  | 设置日期中的时（如果 hours 大于 23，则加日）             |
| setUTCHours(hours)               | 设置 UTC 日期中的时（如果 hours 大于 23，则加日）        |
| getMinutes()                     | 返回日期中的分（0~59）                                   |
| getUTCMinutes()                  | 返回 UTC 日期中的分（0~59）                              |
| setMinutes(minutes)              | 设置日期中的分（如果 minutes 大于 59，则加时）           |
| setUTCMinutes(minutes)           | 设置 UTC 日期中的分（如果 minutes 大于 59，则加时）      |
| getSeconds()                     | 返回日期中的秒（0~59）                                   |
| getUTCSeconds()                  | 返回 UTC 日期中的秒（0~59）                              |
| setSeconds(seconds)              | 设置日期中的秒（如果 seconds 大于 59，则加分）           |
| setUTCSeconds(seconds)           | 设置 UTC 日期中的秒（如果 seconds 大于 59，则加分）      |
| getMilliseconds()                | 返回日期中的毫秒                                         |
| getUTCMilliseconds()             | 返回 UTC 日期中的毫秒                                    |
| setMilliseconds(milliseconds)    | 设置日期中的毫秒                                         |
| setUTCMilliseconds(milliseconds) | 设置 UTC 日期中的毫秒                                    |
| getTimezoneOffset()              | 返回以分钟计的 UTC 与本地时区的偏移量                    |

```js
    let now = new Date("2021-03-18 16:01:02.569")
    console.log(now.getFullYear());//2021 (返回日期中的年份)
    console.log(now.getMonth());   // 2  (返回日期中的月，0表示一月，11表示十二月)
    console.log(now.getDate());    // 18 (返回日期中的日(1~31))
    console.log(now.getDay());     // 4  (返回日期中表示周几的数值（0 表示周日，6 表示周六）)
    console.log(now.getHours());    // 16  (返回日期中的时(0~23))
    console.log(now.getMinutes());    //01   (返回日期中的分（0~59))
    console.log(now.getSeconds());    // 02  (返回日期中的秒(0~23))
    console.log(now.getMilliseconds());    // 569  (返回日期中的毫秒)
```

:::

## RegExp

:::note 笔记

:::

:::code 代码

```js

```

:::

## 原始值包装类型

:::code 原始值包装类型

ECMAScript 提供了 3 种特殊的引用类型：Boolean、Number 和 String。
每当用到某个原始值的方法或属性时，后台都会创建一个相应原始包装类型的对象，从而暴露出操作原始值的各种方法。

在以读模式访问字符串值的任何时候，后台都会执行以下 3 步：

- 创建一个 String 类型的实例；
- 调用实例上的特定方法；
- 销毁实例。

```js
let s1 = "some text"; 
s1 = s1.substring(2);
```

:::

:::code 引用类型与原始值包装类型

引用类型与原始值包装类型的主要区别在于对象的生命周期。
在通过 new 实例化引用类型后，得到的实例会在离开作用域时被销毁，而自动创建的原始值包装对象则只存在于访问它的那行代码执行期间。
这意味着不能在运行时给原始值添加属性和方法。

```js
let number = Number(value); // 转型函数
console.log(typeof number); // "number" 
let obj = new Number(value); // 构造函数
console.log(typeof obj); // "object"
number.color = "red";
console.log(number.color) //undefined
obj.color = "red";
console.log(obj.color) // red
```

:::

:::code Boolean
Boolean 的实例会重写 valueOf()方法，返回一个原始值 true 或 false。
toString()方法被调用时也会被覆盖，返回字符串"true"或"false"。
原始布尔值和 Boolean 对象之间的区别非常重要，强烈建议永远不要使用后者。

```js
    let falseObject = new Boolean(false);
    let result = falseObject && true;
    console.log(result); // true 
    let falseValue = Boolean(false);// 等于 let falseValue = false;
    result = falseValue && true;
    console.log(result); // false
    console.log(typeof falseObject); // object 
    console.log(typeof falseValue); // boolean 
    console.log(falseObject instanceof Boolean); // true 
    console.log(falseValue instanceof Boolean); // false

    console.log(falseObject.valueOf());  // false 
    console.log(falseObject.toString());  // "false" 
    console.log(falseObject.toLocaleString());  // "false" 
    console.log(falseValue.valueOf()); // false 
    console.log(falseValue.toString());  // "false"  
    console.log(falseValue.toLocaleString());  // "false" 
```

:::

:::code Number
与 Boolean 类型一样，Number 类型重写了 valueOf()、toLocaleString()和 toString()方法。

- valueOf()方法返回 Number 对象表示的原始数值，另外两个方法返回数值字符串。
- toString()方法可选地接收一个表示基数的参数，并返回相应基数形式的数值字符串。
- toFixed()方法返回包含指定小数点位数的数值字符串
- toExponential()，返回以科学记数法（也称为指数记数法）表示的数值字符串。
- toPrecision()方法会根据情况返回最合理的输出结果，可能是固定长度，也可能是科学记数法形式。
- Number.isInteger()方法，用于辨别一个数值是否保存为整数。
- Number.isSafeInteger()安全整数

```js
let num = 10;
console.log(num.toString()); // "10" 
console.log(num.toString(2)); // "1010" 
console.log(num.toString(8)); // "12" 
console.log(num.toString(10)); // "10" 
console.log(num.toString(16)); // "a"
console.log(num.toFixed(2)); // "10.00"
console.log(num.toPrecision(1)); // "1e+1" 
console.log(num.toPrecision(2)); // "10" 
console.log(num.toPrecision(3)); // "10.0"
console.log(Number.isInteger(1)); // true 
console.log(Number.isInteger(1.00)); // true 
console.log(Number.isInteger(1.01)); // false
console.log(Number.isSafeInteger(-1 * (2 ** 53))); // false 
console.log(Number.isSafeInteger(-1 * (2 ** 53) + 1)); // true 
console.log(Number.isSafeInteger(2 ** 53)); // false 
console.log(Number.isSafeInteger((2 ** 53) - 1)); // true
```

:::

:::code String

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::

:::code JavaScript 字符

JavaScript 字符串由 16 位码元（code unit）组成。对多数字符来说，每 16 位码元对应一个字符。

- fromCharCode()方法用于根据给定的 UTF-16 码元创建字符串中的字符。
- charAt()方法返回给定索引位置的字符，由传给方法的整数参数指定。
- charCodeAt()方法可以查看指定码元的字符编码。这个方法返回指定索引位置的码元值，索引以整数指定。
- codePointAt()接收 16 位码元的索引并返回该索引位置上的码点（code point）。

```js
    let msg = "abcde";
    console.log(msg.length); // 5
    console.log(msg.charAt(2)); // "c"
    // Unicode "Latin small letter C"的编码是 U+0063 
    console.log(msg.charCodeAt(2)); // 99
    // "smiling face with smiling eyes" 表情符号的编码是 U+1F60A 
    // 0x1F60A === 128522 
    console.log(0x1F60A === 128522);
    console.log(' let message = "ab☺de"')
    let message = "ab☺de";
    console.log(message.length); // 5 
    console.log(message.charAt(1)); // b 
    console.log(message.charAt(2)); // ☺ 
    console.log(message.charAt(3)); // d 
    console.log(message.charAt(4)); // e
    console.log(message.charCodeAt(1)); // 98 
    console.log(message.charCodeAt(2)); // 55357 
    console.log(message.charCodeAt(3)); // 56842 
    console.log(message.charCodeAt(4)); // 100 
    console.log(message.codePointAt(1)); // 98 
    console.log(message.codePointAt(2)); // 128522 
    console.log(message.codePointAt(3)); // 56842 
    console.log(message.codePointAt(4)); // 100
    console.log(String.fromCodePoint(0x1F60A)); // ☺
    console.log(String.fromCharCode(97, 98, 55357, 56842, 100, 101)); // ab☺de
```

:::

:::code 字符串操作方法

concat()方法一样，slice()、substr()和 substring()也不会修改调用它们的字符串，而只会返回提取到的原始新字符串值。

- concat()，用于将一个或多个字符串拼接成一个新字符串。
- ECMAScript 提供了 3 个从字符串中提取子字符串的方法：slice()、substr()和 substring()。这
3个方法都返回调用它们的字符串的一个子字符串，而且都接收一或两个参数。第一个参数表示子字符串开
始的位置，第二个参数表示子字符串结束的位置。对 slice()和 substring()而言，第二个参数是提取结
束的位置（即该位置之前的字符会被提取出来）。对 substr()而言，第二个参数表示返回的子字符串数量。
任何情况下，省略第二个参数都意味着提取到字符串末尾。与 concat()方法一样，slice()、substr()
和 substring()也不会修改调用它们的字符串，而只会返回提取到的原始新字符串值。

```js
let stringValue = "hello "; 
let result = stringValue.concat("world"); 
console.log(result); // "hello world" 
console.log(stringValue); // "hello"
stringValue = "hello world"; 
console.log(stringValue.slice(3)); // "lo world" 
console.log(stringValue.substring(3)); // "lo world" 
console.log(stringValue.substr(3)); // "lo world" 
console.log(stringValue.slice(3, 7)); // "lo w" 
console.log(stringValue.substring(3,7)); // "lo w" 
console.log(stringValue.substr(3, 7)); // "lo worl"
```

:::

:::code 字符串位置方法

有两个方法用于在字符串中定位子字符串：indexOf()和 lastIndexOf()。
这两个方法从字符串中搜索传入的字符串，并返回位置（如果没找到，则返回-1）。
两者的区别在于，indexOf()方法从字符串开头开始查找子字符串，而 lastIndexOf()方法从字符串末尾开始查找子字符串。

```js
let stringValue = "hello world"; 
console.log(stringValue.indexOf("o")); // 4 
console.log(stringValue.lastIndexOf("o")); // 7
console.log(stringValue.indexOf("o", 6)); // 7 
console.log(stringValue.lastIndexOf("o", 6)); // 4
```

:::

:::code 字符串包含方法

ECMAScript 6 增加了 3 个用于判断字符串中是否包含另一个字符串的方法：startsWith()、endsWith()和 includes()。
这些方法都会从字符串中搜索传入的字符串，并返回一个表示是否包含的布尔值。
它们的区别在于，startsWith()检查开始于索引 0 的匹配项，endsWith()检查开始于索引(string.length - substring.length)的匹配项，而 includes()检查整个字符串。

```js
    let message = "foobarbaz";
    console.log(message.startsWith("foo")); // true 
    console.log(message.startsWith("foo", 1)); // false 
    console.log(message.startsWith("bar")); // false 

    console.log(message.endsWith("baz")); // true 
    console.log(message.endsWith("baz", 4)); // false 
    console.log(message.endsWith("bar")); // false 

    console.log(message.includes("bar")); // true 
    console.log(message.includes("bar", 4)); // false
    console.log(message.includes("qux")); // false
```

:::
:::code trim()方法

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code repeat()方法

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code padStart()和 padEnd()方法

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code 字符串迭代与解构

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code 字符串大小写转换

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code 字符串模式匹配方法

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::
:::code localeCompare()方法

String 方法属性

- 3个继承的方法 valueOf()、toLocaleString()和 toString()都返回对象的原始字符串值。
- 每个 String 对象都有一个 length 属性，表示字符串中字符的数量。

```js
let message = "abcde"; 
console.log(message.length); // 5
```

:::

## 单例内置对象

:::note 笔记

:::

:::code 代码

```js

```

:::
